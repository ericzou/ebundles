<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>saveActiveFile</string>
	<key>command</key>
	<string>### Preview in All Active Browsers
### v1.0. 2005-03-29
### v1.1. 2005-12-04
###
###	CONFIG OPTION:: Set TM_PROJECT_SITEURL in your TM Project Window Info Button in the following form: [ http://your.site.ext/ ]
###

# 1. Check if we have a SITE_URL
if [[ -n "$TM_PROJECT_SITEURL" ]]
	then activeURL=$TM_PROJECT_SITEURL${TM_FILEPATH##$TM_PROJECT_DIRECTORY}
	else activeURL=file://$TM_FILEPATH
fi

# 2. Now check if any browser is running, if so, point it to the URL
## Safari or Webkit
[[ $(ps -xc|grep Safari) ]] &amp;&amp; osascript -e 'tell app "System Events" to set proclist to name of every application process' -e 'if proclist contains "Webkit" then' -e 'tell app "Webkit"' -e activate -e "make new document" -e "set the URL of document 1 to \"$activeURL\"" -e 'end tell' -e 'end if' -e 'if proclist contains "Safari" then' -e 'tell app "Safari"' -e activate -e "make new document" -e "set the URL of document 1 to \"$activeURL\"" -e 'end tell' -e 'end if'

## Shiira
[[ $(ps -xc|grep Shiira) ]] &amp;&amp; osascript -e 'tell app "Shiira"' -e activate -e "make new document" -e "set the URL of document 1 to \"$activeURL\"" -e 'end tell'

## FireFox
[[ $(ps -xc|grep -i firefox) ]] &amp;&amp; osascript -e 'tell app "Firefox"' -e activate -e "Get URL \"$activeURL\" inside window 1" -e "end tell"

## Internet Explorer
[[ $(ps -xc|grep "Internet Explorer") ]] &amp;&amp; osascript -e 'tell app "Internet Explorer"' -e "activate OpenURL \"$activeURL\" toWindow 0 Flags 1" -e 'end tell'

## OmniWeb
[[ $(ps -xc|grep -i OmniWeb) ]] &amp;&amp; osascript -e 'tell app "OmniWeb"' -e activate -e "GetURL \"$activeURL\"" -e 'end tell'

## Camino
[[ $(ps -xc|grep -i Camino) ]] &amp;&amp; osascript -e 'tell app "Camino"' -e activate -e "Get URL \"$activeURL\"" -e 'end tell'

## Xyle scope
[[ $(ps -xc|grep "Xyle scope") ]] &amp;&amp; osascript -e 'tell app "Xyle scope"' -e activate -e "Get URL \"$activeURL\"" -e 'end tell'
</string>
	<key>winCommand</key>
	<string>#!/usr/bin/env ruby
require &apos;win32ole&apos;
filename = ENV[&apos;TM_FILEPATH&apos;].delete &apos;\\&apos;
urlfile = %x[cygpath -m &quot;#{filename}&quot;].chomp.capitalize
url = &quot;file:///&quot; &lt;&lt; urlfile
ie = WIN32OLE.new(&apos;InternetExplorer.Application&apos;)
ie.Visible = true
ie.Navigate2(&quot;#{url}&quot;)
</string> 
	<key>input</key>
	<string>none</string>
	<key>name</key>
	<string>Open Document in Running Browser(s)</string>
	<key>output</key>
	<string>discard</string>
	<key>scope</key>
	<string>text.html</string>
	<key>uuid</key>
	<string>970EE6B4-A091-11D9-A5A2-000D93C8BE28</string>
</dict>
</plist>
